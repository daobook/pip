<!doctype html>
<html class="no-js" lang="zh_CN">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="search" title="搜索" href="../search.html" /><link rel="copyright" title="版权所有" href="../copyright.html" /><link rel="next" title="UX Research &amp; Design" href="../ux_research_design.html" /><link rel="prev" title="Release process" href="release-process.html" />

    <meta name="generator" content="sphinx-4.2.0, furo 2021.10.09"/>
        <title>Vendoring Policy - pip documentation v22.0.dev0</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=0254c309f5cadf746f1a613e7677379ac9c8cdcd" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=16fb25fabf47304eee183a5e9af80b1ba98259b1" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">pip documentation v22.0.dev0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">pip documentation v22.0.dev0</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=搜索 name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">用户指南</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../topics/index.html">主题指南</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../topics/authentication.html">认证</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/caching.html">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/configuration.html">配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/dependency-resolution.html">Dependency Resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/repeatable-installs.html">Repeatable Installs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topics/vcs-support.html">VCS Support</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/build-system/index.html">Build System Interface</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/build-system/pyproject-toml.html"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/build-system/setup-py.html"><code class="docutils literal notranslate"><span class="pre">setup.py</span></code> (legacy)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/requirements-file-format.html">Requirements File Format</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../cli/index.html">Commands</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip.html">pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_install.html">pip install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_uninstall.html">pip uninstall</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_list.html">pip list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_show.html">pip show</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_freeze.html">pip freeze</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_check.html">pip check</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_download.html">pip download</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_wheel.html">pip wheel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_hash.html">pip hash</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_search.html">pip search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_cache.html">pip cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_config.html">pip config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/pip_debug.html">pip debug</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">项目</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Development</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="ci.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="issue-triage.html">Issue Triage</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="architecture/index.html">Architecture of pip’s internals</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="architecture/overview.html">Broad functionality overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture/anatomy.html">Repository anatomy &amp; directory structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture/configuration-files.html">Configuration File Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture/package-finding.html">Finding and choosing files (<code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">PackageFinder</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture/command-line-interface.html">Command Line Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="architecture/upgrade-options.html">Options that control the installation process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="release-process.html">Release process</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Vendoring Policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ux_research_design.html">UX Research &amp; Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../news.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pypa/.github/blob/main/CODE_OF_CONDUCT.md">行为准则</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pypa/pip">GitHub</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="vendoring-policy">
<h1>Vendoring Policy<a class="headerlink" href="#vendoring-policy" title="永久链接至标题">¶</a></h1>
<ul class="simple">
<li><p>Vendored libraries <strong>MUST</strong> not be modified except as required to
successfully vendor them.</p></li>
<li><p>Vendored libraries <strong>MUST</strong> be released copies of libraries available on
PyPI.</p></li>
<li><p>Vendored libraries <strong>MUST</strong> be available under a license that allows
them to be integrated into <code class="docutils literal notranslate"><span class="pre">pip</span></code>, which is released under the MIT license.</p></li>
<li><p>Vendored libraries <strong>MUST</strong> be accompanied with LICENSE files.</p></li>
<li><p>The versions of libraries vendored in pip <strong>MUST</strong> be reflected in
<code class="docutils literal notranslate"><span class="pre">pip/_vendor/vendor.txt</span></code>.</p></li>
<li><p>Vendored libraries <strong>MUST</strong> function without any build steps such as <code class="docutils literal notranslate"><span class="pre">2to3</span></code>
or compilation of C code, practically this limits to single source 2.x/3.x and
pure Python.</p></li>
<li><p>Any modifications made to libraries <strong>MUST</strong> be noted in
<code class="docutils literal notranslate"><span class="pre">pip/_vendor/README.rst</span></code> and their corresponding patches <strong>MUST</strong> be
included <code class="docutils literal notranslate"><span class="pre">tools/vendoring/patches</span></code>.</p></li>
<li><p>Vendored libraries should have corresponding <code class="docutils literal notranslate"><span class="pre">vendored()</span></code> entries in
<code class="docutils literal notranslate"><span class="pre">pip/_vendor/__init__.py</span></code>.</p></li>
</ul>
<section id="rationale">
<h2>Rationale<a class="headerlink" href="#rationale" title="永久链接至标题">¶</a></h2>
<p>Historically pip has not had any dependencies except for <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> itself,
choosing instead to implement any functionality it needed to prevent needing
a dependency. However, starting with pip 1.5, we began to replace code that was
implemented inside of pip with reusable libraries from PyPI. This brought the
typical benefits of reusing libraries instead of reinventing the wheel like
higher quality and more battle tested code, centralization of bug fixes
(particularly security sensitive ones), and better/more features for less work.</p>
<p>However, there are several issues with having dependencies in the traditional
way (via <code class="docutils literal notranslate"><span class="pre">install_requires</span></code>) for pip. These issues are:</p>
<dl class="simple">
<dt><strong>Fragility</strong></dt><dd><p>When pip depends on another library to function then if for whatever reason
that library either isn’t installed or an incompatible version is installed
then pip ceases to function. This is of course true for all Python
applications, however for every application <em>except</em> for pip the way you fix
it is by re-running pip. Obviously, when pip can’t run, you can’t use pip to
fix pip, so you’re left having to manually resolve dependencies and
installing them by hand.</p>
</dd>
<dt><strong>Making other libraries uninstallable</strong></dt><dd><p>One of pip’s current dependencies is the <code class="docutils literal notranslate"><span class="pre">requests</span></code> library, for which pip
requires a fairly recent version to run.  If pip depended on <code class="docutils literal notranslate"><span class="pre">requests</span></code> in
the traditional manner, then we’d either have to maintain compatibility with
every <code class="docutils literal notranslate"><span class="pre">requests</span></code> version that has ever existed (and ever will), OR allow
pip to render certain versions of <code class="docutils literal notranslate"><span class="pre">requests</span></code> uninstallable. (The second
issue, although technically true for any Python application, is magnified by
pip’s ubiquity; pip is installed by default in Python, in <code class="docutils literal notranslate"><span class="pre">pyvenv</span></code>, and in
<code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>.)</p>
</dd>
<dt><strong>Security</strong></dt><dd><p>This might seem puzzling at first glance, since vendoring has a tendency to
complicate updating dependencies for security updates, and that holds true
for pip. However, given the <em>other</em> reasons for avoiding dependencies, the
alternative is for pip to reinvent the wheel itself.  This is what pip did
historically. It forced pip to re-implement its own HTTPS verification
routines as a workaround for the Python standard library’s lack of SSL
validation, which resulted in similar bugs in the validation routine in
<code class="docutils literal notranslate"><span class="pre">requests</span></code> and <code class="docutils literal notranslate"><span class="pre">urllib3</span></code>, except that they had to be discovered and
fixed independently. Even though we’re vendoring, reusing libraries keeps
pip more secure by relying on the great work of our dependencies, <em>and</em>
allowing for faster, easier security fixes by simply pulling in newer
versions of dependencies.</p>
</dd>
<dt><strong>Bootstrapping</strong></dt><dd><p>Currently most popular methods of installing pip rely on pip’s
self-contained nature to install pip itself. These tools work by bundling a
copy of pip, adding it to <code class="docutils literal notranslate"><span class="pre">sys.path</span></code>, and then executing that copy of pip.
This is done instead of implementing a “mini installer” (to reduce
duplication); pip already knows how to install a Python package, and is far
more battle-tested than any “mini installer” could ever possibly be.</p>
</dd>
</dl>
<p>Many downstream redistributors have policies against this kind of bundling, and
instead opt to patch the software they distribute to debundle it and make it
rely on the global versions of the software that they already have packaged
(which may have its own patches applied to it). We (the pip team) would prefer
it if pip was <em>not</em> debundled in this manner due to the above reasons and
instead we would prefer it if pip would be left intact as it is now. The one
exception to this, is it is acceptable to remove the
<code class="docutils literal notranslate"><span class="pre">pip/_vendor/requests/cacert.pem</span></code> file provided you ensure that the
<code class="docutils literal notranslate"><span class="pre">ssl.get_default_verify_paths().cafile</span></code> API returns the correct CA bundle for
your system. This will ensure that pip will use your system provided CA bundle
instead of the copy bundled with pip.</p>
<p>In the longer term, if someone has a <em>portable</em> solution to the above problems,
other than the bundling method we currently use, that doesn’t add additional
problems that are unreasonable then we would be happy to consider, and possibly
switch to said method. This solution must function correctly across all of the
situation that we expect pip to be used and not mandate some external mechanism
such as OS packages.</p>
</section>
<section id="modifications">
<h2>Modifications<a class="headerlink" href="#modifications" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setuptools</span></code> is completely stripped to only keep <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> has been modified to import its dependencies from
<code class="docutils literal notranslate"><span class="pre">pip._vendor</span></code>, and to use the vendored copy of <code class="docutils literal notranslate"><span class="pre">platformdirs</span></code>
rather than <code class="docutils literal notranslate"><span class="pre">appdirs</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">packaging</span></code> has been modified to import its dependencies from
<code class="docutils literal notranslate"><span class="pre">pip._vendor</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">html5lib</span></code> has been modified to import six from <code class="docutils literal notranslate"><span class="pre">pip._vendor</span></code>, to prefer
importing from <code class="docutils literal notranslate"><span class="pre">collections.abc</span></code> instead of <code class="docutils literal notranslate"><span class="pre">collections</span></code> and does not
import <code class="docutils literal notranslate"><span class="pre">xml.etree.cElementTree</span></code> on Python 3.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CacheControl</span></code> has been modified to import its dependencies from
<code class="docutils literal notranslate"><span class="pre">pip._vendor</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">requests</span></code> has been modified to import its other dependencies from
<code class="docutils literal notranslate"><span class="pre">pip._vendor</span></code> and to <em>not</em> load <code class="docutils literal notranslate"><span class="pre">simplejson</span></code> (all platforms) and
<code class="docutils literal notranslate"><span class="pre">pyopenssl</span></code> (Windows).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">platformdirs</span></code> has been modified to import its submodules from <code class="docutils literal notranslate"><span class="pre">pip._vendor.platformdirs</span></code>.</p></li>
</ul>
</section>
<section id="automatic-vendoring">
<h2>Automatic Vendoring<a class="headerlink" href="#automatic-vendoring" title="永久链接至标题">¶</a></h2>
<p>Vendoring is automated via the <a class="reference external" href="https://pypi.org/project/vendoring/">vendoring</a> tool from the content of
<code class="docutils literal notranslate"><span class="pre">pip/_vendor/vendor.txt</span></code> and the different patches in
<code class="docutils literal notranslate"><span class="pre">tools/vendoring/patches</span></code>.
Launch it via <code class="docutils literal notranslate"><span class="pre">vendoring</span> <span class="pre">sync</span> <span class="pre">.</span> <span class="pre">-v</span></code> (requires <code class="docutils literal notranslate"><span class="pre">vendoring&gt;=0.2.2</span></code>).</p>
</section>
<section id="debundling">
<h2>Debundling<a class="headerlink" href="#debundling" title="永久链接至标题">¶</a></h2>
<p>As mentioned in the rationale, we, the pip team, would prefer it if pip was not
debundled (other than optionally <code class="docutils literal notranslate"><span class="pre">pip/_vendor/requests/cacert.pem</span></code>) and that
pip was left intact. However, if you insist on doing so, we have a
semi-supported method (that we don’t test in our CI) and requires a bit of
extra work on your end in order to solve the problems described above.</p>
<ol class="arabic simple">
<li><p>Delete everything in <code class="docutils literal notranslate"><span class="pre">pip/_vendor/</span></code> <strong>except</strong> for
<code class="docutils literal notranslate"><span class="pre">pip/_vendor/__init__.py</span></code> and <code class="docutils literal notranslate"><span class="pre">pip/_vendor/vendor.txt</span></code>.</p></li>
<li><p>Generate wheels for each of pip’s dependencies (and any of their
dependencies) using your patched copies of these libraries. These must be
placed somewhere on the filesystem that pip can access (<code class="docutils literal notranslate"><span class="pre">pip/_vendor</span></code> is
the default assumption).</p></li>
<li><p>Modify <code class="docutils literal notranslate"><span class="pre">pip/_vendor/__init__.py</span></code> so that the <code class="docutils literal notranslate"><span class="pre">DEBUNDLED</span></code> variable is
<code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p>Upon installation, the <code class="docutils literal notranslate"><span class="pre">INSTALLER</span></code> file in pip’s own <code class="docutils literal notranslate"><span class="pre">dist-info</span></code>
directory should be set to something other than <code class="docutils literal notranslate"><span class="pre">pip</span></code>, so that pip
can detect that it wasn’t installed using itself.</p></li>
<li><p><em>(optional)</em> If you’ve placed the wheels in a location other than
<code class="docutils literal notranslate"><span class="pre">pip/_vendor/</span></code>, then modify <code class="docutils literal notranslate"><span class="pre">pip/_vendor/__init__.py</span></code> so that the
<code class="docutils literal notranslate"><span class="pre">WHEEL_DIR</span></code> variable points to the location you’ve placed them.</p></li>
<li><p><em>(optional)</em> Update the <code class="docutils literal notranslate"><span class="pre">pip_self_version_check</span></code> logic to use the
appropriate logic for determining the latest available version of pip and
prompt the user with the correct upgrade message.</p></li>
</ol>
<p>Note that partial debundling is <strong>NOT</strong> supported. You need to prepare wheels
for all dependencies for successful debundling.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../ux_research_design.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">UX Research &amp; Design</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="release-process.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Release process</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              <a href="../copyright.html">Copyright</a> &#169; The pip developers. |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>. |
            <a class="muted-link" href="../_sources/development/vendoring-policy.rst.txt"
               rel="nofollow">
              显示源代码
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            目录
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Vendoring Policy</a><ul>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#modifications">Modifications</a></li>
<li><a class="reference internal" href="#automatic-vendoring">Automatic Vendoring</a></li>
<li><a class="reference internal" href="#debundling">Debundling</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/main.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/tabs.js"></script>
    <script src="../_static/translations.js"></script>
    </body>
</html>
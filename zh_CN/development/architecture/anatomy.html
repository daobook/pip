<!doctype html>
<html class="no-js" lang="zh_CN">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="search" title="搜索" href="../../search.html" /><link rel="copyright" title="版权所有" href="../../copyright.html" /><link rel="next" title="Configuration File Handling" href="configuration-files.html" /><link rel="prev" title="Broad functionality overview" href="overview.html" />

    <meta name="generator" content="sphinx-4.2.0, furo 2021.10.09"/>
        <title>Repository anatomy &amp; directory structure - pip documentation v22.0.dev0</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=0254c309f5cadf746f1a613e7677379ac9c8cdcd" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=16fb25fabf47304eee183a5e9af80b1ba98259b1" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">pip documentation v22.0.dev0</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">pip documentation v22.0.dev0</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder=搜索 name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html">入门指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide.html">用户指南</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../topics/index.html">主题指南</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../topics/authentication.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/caching.html">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/configuration.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/dependency-resolution.html">Dependency Resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/repeatable-installs.html">Repeatable Installs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../topics/vcs-support.html">VCS Support</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../reference/index.html">Reference</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../reference/build-system/index.html">Build System Interface</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/build-system/pyproject-toml.html"><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/build-system/setup-py.html"><code class="docutils literal notranslate"><span class="pre">setup.py</span></code> (legacy)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/requirements-file-format.html">Requirements File Format</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../cli/index.html">Commands</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip.html">pip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_install.html">pip install</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_uninstall.html">pip uninstall</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_list.html">pip list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_show.html">pip show</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_freeze.html">pip freeze</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_check.html">pip check</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_download.html">pip download</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_wheel.html">pip wheel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_hash.html">pip hash</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_search.html">pip search</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_cache.html">pip cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_config.html">pip config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cli/pip_debug.html">pip debug</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">项目</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Development</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ci.html">Continuous Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../issue-triage.html">Issue Triage</a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Architecture of pip’s internals</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="overview.html">Broad functionality overview</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Repository anatomy &amp; directory structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="configuration-files.html">Configuration File Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="package-finding.html">Finding and choosing files (<code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">PackageFinder</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="command-line-interface.html">Command Line Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="upgrade-options.html">Options that control the installation process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release-process.html">Release process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vendoring-policy.html">Vendoring Policy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ux_research_design.html">UX Research &amp; Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../news.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pypa/.github/blob/main/CODE_OF_CONDUCT.md">行为准则</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/pypa/pip">GitHub</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="admonition note">
<p class="admonition-title">注解</p>
<p>This section of the documentation is currently being written. pip
developers welcome your help to complete this documentation. If you’re
interested in helping out, please let us know in the <a class="reference external" href="https://github.com/pypa/pip/issues/6831">tracking issue</a>.</p>
</div>
<section id="repository-anatomy-directory-structure">
<h1>Repository anatomy &amp; directory structure<a class="headerlink" href="#repository-anatomy-directory-structure" title="永久链接至标题">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">pip</span></code>’s codebase (<a class="reference external" href="https://github.com/pypa/pip/">GitHub repository</a>) is structured as a standard Python package.</p>
<section id="root-and-tools">
<h2>Root and tools<a class="headerlink" href="#root-and-tools" title="永久链接至标题">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">README</span></code>, license, <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code>, <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>, and so on are in the top level.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">AUTHORS.txt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LICENSE.txt</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MANIFEST.in</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NEWS.rst</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">README.rst</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup.cfg</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> -- <code class="docutils literal notranslate"><span class="pre">pip</span></code> uses Tox, an automation tool, configured by this <a class="reference external" href="https://github.com/pypa/pip/blob/main/tox.ini">tox.ini</a> file. <code class="docutils literal notranslate"><span class="pre">tox.ini</span></code> describes a few environments <code class="docutils literal notranslate"><span class="pre">pip</span></code> uses during development for simplifying how tests are run (complicated situation there). Example: <code class="docutils literal notranslate"><span class="pre">tox</span> <span class="pre">-e</span> <span class="pre">-py36</span></code>. We can run tests for different versions of Python by changing “36” to “27” or similar.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.coveragerc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.gitattributes</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.gitignore</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.mailmap</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.readthedocs.yml</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">docs/</span></code> <em>[documentation, built with Sphinx]</em></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">html/</span></code> <em>[sources to HTML documentation avail. online]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">man/</span></code> has man pages the distros can use by running <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">pip</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pip_sphinxext.py</span></code> <em>[an extension -- pip-specific plugins to Sphinx that do not apply to other packages]</em></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">news/</span></code> <em>[pip stores news fragments… Every time pip makes a user-facing change, a file is added to this directory (usually a short note referring to a GitHub issue) with the right extension &amp; name so it gets included in changelog…. So every release the maintainers will be deleting old files in this directory? Yes - we use the towncrier automation to generate a NEWS file, and auto-delete old stuff. There’s more about this in the contributor documentation!]</em></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">template.rst</span></code> <em>[template for changelog -- this is a file towncrier uses…. Is this jinja? I don’t know, check towncrier docs]</em></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">src/</span></code> <em>[source; see below]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tasks/</span></code> <em>[invoke is a PyPI library which uses files in this directory to define automation commands that are used in pip’s development processes -- not discussing further right now. For instance, automating the release.]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tests/</span></code> -- contains tests you can run. There are instructions in <a class="reference internal" href="../getting-started.html"><span class="doc">Getting Started</span></a>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">conftest.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data/</span></code> <em>[test data for running tests -- pseudo package index in it!  Lots of small packages that are invalid or are valid. Test fixtures.  Used by functional tests]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">functional/</span></code> <em>[functional tests of pip’s CLI -- end-to-end, invoke pip in subprocess &amp; check results of execution against desired result. This also is what makes test suite slow]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lib/</span></code> <em>[helpers for tests]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unit/</span></code> <em>[unit tests -- fast and small and nice!]</em></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools</span></code> <em>[misc development workflow tools, like requirements files &amp; CI files &amp; helpers for tox]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.github</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.tox</span></code></p></li>
</ul>
</section>
<section id="src-directory">
<h2>src directory<a class="headerlink" href="#src-directory" title="永久链接至标题">¶</a></h2>
<p>In the root directory, the <code class="docutils literal notranslate"><span class="pre">src/</span></code> directory contains pip’s core
source code. Within <code class="docutils literal notranslate"><span class="pre">src/pip/</span></code>, <code class="docutils literal notranslate"><span class="pre">_internal/</span></code> has the pip code
that’s written by pip maintainers, and <code class="docutils literal notranslate"><span class="pre">_vendor/</span></code> is pip’s
dependencies (code from other packages).</p>
<p>Within <code class="docutils literal notranslate"><span class="pre">src/</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pip.egg-info/</span></code> <em>[ignore the contents for now]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pip/</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__main__.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__pycache__/</span></code> <em>[not discussing contents right now]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_internal/</span></code> <em>[where all the pip code lives that’s written by pip maintainers -- underscore means private. pip is not a library -- it’s a command line tool! A very important distinction! People who want to install stuff with pip should not use the internals -- they should use the CLI. There’s a note on this in the docs.]</em></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">__init__.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">build_env.py</span></code> [not discussing now]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cache.py</span></code> <em>[has all the info for how to handle caching within pip -- cache-handling stuff. Uses cachecontrol from PyPI, vendored into pip]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cli/</span></code> <em>[subpackage containing helpers &amp; additional code for managing the command line interface. Uses argparse from stdlib]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">commands/</span></code> <em>[literally - each file is the name of the command on the pip CLI. Each has a class that defines what’s needed to set it up, what happens]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">configuration.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">download.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exceptions.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">index.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">locations.py</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">models/</span></code> <em>[in-process refactoring! Goal: improve how pip internally models representations it has for data -- data representation. General overall cleanup. Data reps are spread throughout codebase….link is defined in a class in 1 file, and then another file imports Link from that file. Sometimes cyclic dependency?!?! To prevent future situations like this, etc., Pradyun started moving these into a models directory.]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">operations/</span></code> -- a bit of a weird directory….. <code class="docutils literal notranslate"><span class="pre">Freeze.py</span></code> used to be in there. Freeze is an operation -- there was an operations.freeze. Then “prepare” got added (the operation of preparing a pkg). Then “check” got added for checking the state of an env.] [what’s a command vs an operation? Command is on CLI; an operation would be an internal bit of code that actually does some subset of the operation the command says. <code class="docutils literal notranslate"><span class="pre">install</span></code> command uses bits of <code class="docutils literal notranslate"><span class="pre">check</span></code> and <code class="docutils literal notranslate"><span class="pre">prepare</span></code>, for instance. In the long run, Pradyun’s goal: <code class="docutils literal notranslate"><span class="pre">prepare.py</span></code> goes away (gets refactored into other files) such that <code class="docutils literal notranslate"><span class="pre">operations</span></code> is just <code class="docutils literal notranslate"><span class="pre">check</span></code> and <code class="docutils literal notranslate"><span class="pre">freeze</span></code>….. … Pradyun plans to refactor this. [how does this compare to <code class="docutils literal notranslate"><span class="pre">utils</span></code>?]</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">install/</span></code> -- for modules related to installing projects of various kinds</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">wheel.py</span></code> is a file that manages installation of a wheel file. This handles unpacking wheels -- “unpack and spread”. There is a package on PyPI called <code class="docutils literal notranslate"><span class="pre">wheel</span></code> that builds wheels -- do not confuse it with this.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pep425tags.py</span></code> -- getting refactored into packaging.tags (a library on PyPI) which is external to pip (but vendored by pip). <span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0425"><strong>PEP 425</strong></a> tags: turns out lots of people want this! Compatibility tags for built distributions -&gt; e.g., platform, Python version, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyproject.py</span></code> -- <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> is a new standard (<span class="target" id="index-1"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0518"><strong>PEP 518</strong></a> and <span class="target" id="index-2"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0517"><strong>PEP 517</strong></a>). This file reads pyproject.toml and passes that info elsewhere. The rest of the processing happens in a different file. All the handling for 517 and 518 is in a different file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">req/</span></code> <em>[</em><strong>A DIRECTORY THAT NEEDS REFACTORING. A LOT</strong><em>…… Remember Step 3? Dependency resolution etc.? This is that step! Each file represents … have the entire flow of installing &amp; uninstalling, getting info about packages…. Some files here are more than 1,000 lines long! (used to be longer?!) Refactor will deeply improve developer experience. Also, we’re `improving the pip dependency resolver`_ in 2020 so a bunch of this is changing.]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">utils/</span></code> <em>[everything that is not “operationally” pip ….. Misc functions and files get dumped. There’s some organization here. There’s a models.py here which needs refactoring. Deprecation.py is useful, as are other things, but some things do not belong here. There ought to be some GitHub issues for refactoring some things here. Maybe a few issues with checkbox lists.]</em></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vcs/</span></code> <em>[stands for Version Control System. Where pip handles all version control stuff -- one of the ``pip install`` arguments you can use is a version control link. Are any of these commands vendored? No, via subprocesses. For performance, it makes sense (we think) to do this instead of pygitlib2 or similar -- and has to be pure Python, can’t include C libraries, because you can’t include compiled C stuff, because you might not have it for the platform you are running on.]</em></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">_vendor/</span></code> <em>[code from other packages -- pip’s own dependencies…. Has them in its own source tree, because pip cannot depend on pip being installed on the machine already!]</em></p></li>
</ul>
</li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="configuration-files.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Configuration File Handling</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="overview.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Broad functionality overview</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              <a href="../../copyright.html">Copyright</a> &#169; The pip developers. |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>. |
            <a class="muted-link" href="../../_sources/development/architecture/anatomy.rst.txt"
               rel="nofollow">
              显示源代码
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            目录
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Repository anatomy &amp; directory structure</a><ul>
<li><a class="reference internal" href="#root-and-tools">Root and tools</a></li>
<li><a class="reference internal" href="#src-directory">src directory</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/scripts/main.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/translations.js"></script>
    </body>
</html>